jQuery(function(l){"use strict";function t(t){var i,o=jQuery.Deferred();return(i=jQuery.Deferred(),n.addClass(e),setTimeout(function(){n.removeClass(e).hide(),i.resolve()},200),i.promise()).done(function(){var i,e;e=o,i="all"!==(i=t)&&i?'[data-categories*="'+i+'"]':"div",n.filter(i).show().addClass("ocdi-is-fadein"),setTimeout(function(){n.removeClass("ocdi-is-fadein"),e.resolve()},200)}),o}var n,e;function p(i,e){l(".js-ocdi-ajax-response").empty(),e.siblings(".js-ocdi-gl-item").fadeOut(500),e.animate({opacity:0},500,"swing",function(){e.animate({opacity:1},500)}),e.closest(".js-ocdi-gl").find(".js-ocdi-gl-header").fadeOut(500),e.parent().prepend("<h3>"+ocdi.texts.selected_import_title+"</h3>"),e.find(".js-ocdi-gl-import-data").remove();var t=new FormData;t.append("action","ocdi_import_demo_data"),t.append("security",ocdi.ajax_nonce),t.append("selected",i),o(t)}function o(t){l.ajax({method:"POST",url:ocdi.ajax_url,data:t,contentType:!1,processData:!1,beforeSend:function(){l(".js-ocdi-ajax-loader").show()}}).done(function(i){var e;void 0!==i.status&&"newAJAX"===i.status?o(t):void 0!==i.status&&"customizerAJAX"===i.status?((e=new FormData).append("action","ocdi_import_customizer_data"),e.append("security",ocdi.ajax_nonce),!0===ocdi.wp_customize_on&&e.append("wp_customize","on"),o(e)):void 0!==i.status&&"afterAllImportAJAX"===i.status?((e=new FormData).append("action","ocdi_after_import_data"),e.append("security",ocdi.ajax_nonce),o(e)):void 0!==i.message?(l(".js-ocdi-ajax-response").append("<p>"+i.message+"</p>"),l(".js-ocdi-ajax-loader").hide(),l(document).trigger("ocdiImportComplete")):(l(".js-ocdi-ajax-response").append('<div class="notice  notice-error  is-dismissible"><p>'+i+"</p></div>"),l(".js-ocdi-ajax-loader").hide())}).fail(function(i){l(".js-ocdi-ajax-response").append('<div class="notice  notice-error  is-dismissible"><p>Error: '+i.statusText+" ("+i.status+")</p></div>"),l(".js-ocdi-ajax-loader").hide()})}l(".js-ocdi-import-data").on("click",function(){l(".js-ocdi-ajax-response").empty();var i=new FormData;i.append("action","ocdi_import_demo_data"),i.append("security",ocdi.ajax_nonce),i.append("selected",l("#ocdi__demo-import-files").val()),l("#ocdi__content-file-upload").length&&i.append("content_file",l("#ocdi__content-file-upload")[0].files[0]),l("#ocdi__widget-file-upload").length&&i.append("widget_file",l("#ocdi__widget-file-upload")[0].files[0]),l("#ocdi__customizer-file-upload").length&&i.append("customizer_file",l("#ocdi__customizer-file-upload")[0].files[0]),l("#ocdi__redux-file-upload").length&&(i.append("redux_file",l("#ocdi__redux-file-upload")[0].files[0]),i.append("redux_option_name",l("#ocdi__redux-option-name").val())),o(i)}),l(".js-ocdi-gl-import-data").on("click",function(){var i,e,t,o,n,a,d,c,s=l(this).val(),r=l(this).closest(".js-ocdi-gl-item");ocdi.import_popup?(i=s,e=r,t=l("#js-ocdi-modal-content"),o=ocdi.import_files[i].import_preview_image_url||ocdi.theme_screenshot,n="",a=ocdi.import_files[i].import_notice||"",d="",c=l.extend({dialogClass:"wp-dialog",resizable:!1,height:"auto",modal:!0},ocdi.dialog_options,{buttons:[{text:ocdi.texts.dialog_no,click:function(){l(this).dialog("close")}},{text:ocdi.texts.dialog_yes,class:"button  button-primary",click:function(){l(this).dialog("close"),p(i,e)}}]}),n=""===o?"<p>"+ocdi.texts.missing_preview_image+"</p>":'<div class="ocdi__modal-image-container"><img src="'+o+'" alt="'+ocdi.import_files[i].import_file_name+'"></div>',""!==a&&(d='<div class="ocdi__modal-notice  ocdi__demo-import-notice">'+a+"</div>"),t.prop("title",ocdi.texts.dialog_title),t.html('<p class="ocdi__modal-item-title">'+ocdi.import_files[i].import_file_name+"</p>"+n+d),t.dialog(c)):p(s,r)}),l(document).on("ready",function(){l(".js-ocdi-notice-wrapper").appendTo(".js-ocdi-admin-notices-container")}),l(".js-ocdi-install-plugins").on("click",function(){var e=l(this);if(e.hasClass("ocdi-button-disabled"))return!1;var o=l(".ocdi-install-plugins-content-content .plugin-item input[type=checkbox]").serializeArray(),n=0;if(0===o.length)return!1;e.addClass("ocdi-button-disabled"),o.forEach(function(i){var t=i.name;l.ajax({method:"POST",url:ocdi.ajax_url,data:{action:"ocdi_install_plugin",security:ocdi.ajax_nonce,slug:t},beforeSend:function(){var i=l(".plugin-item-"+t);i.find(".js-ocdi-plugin-item-info").empty(),i.find(".js-ocdi-plugin-item-error").empty(),i.find(".js-ocdi-plugin-item-info").append("<p>"+ocdi.texts.installing+"</p>")}}).done(function(i){var e=l(".plugin-item-"+t);e.find(".js-ocdi-plugin-item-info").empty(),i.success?(e.addClass("plugin-item--active"),e.find("input[type=checkbox]").prop("disabled",!0)):e.find(".js-ocdi-plugin-item-error").append("<p>"+i.data+"</p>")}).fail(function(i){$currentPluginItem.find(".js-ocdi-plugin-item-error").append("<p>"+i.statusText+" ("+i.status+")</p>")}).always(function(){++n===o.length&&e.removeClass("ocdi-button-disabled")})})}),l(".js-ocdi-create-content").on("click",function(){var e=l(this);if(e.hasClass("ocdi-button-disabled"))return!1;var t=l(".ocdi-create-content-content .content-item input[type=checkbox]").serializeArray(),n=0;if(0===t.length)return!1;e.addClass("ocdi-button-disabled"),t.forEach(function(i){var o=i.name;l.ajax({method:"POST",url:ocdi.ajax_url,data:{action:"ocdi_import_created_content",security:ocdi.ajax_nonce,slug:o},beforeSend:function(){var i=l(".content-item-"+o);i.find(".js-ocdi-content-item-info").empty(),i.find(".js-ocdi-content-item-error").empty(),i.find(".js-ocdi-content-item-info").append("<p>"+ocdi.texts.importing+"</p>")}}).done(function(i){var e=l(".content-item-"+o),t=e.find(".js-ocdi-content-item-info");t.empty(),i.success?t.append("<p>"+ocdi.texts.successful_import+"</p>"):e.find(".js-ocdi-content-item-error").append("<p>"+i.data+"</p>")}).fail(function(i){$currentPluginItem.find(".js-ocdi-content-item-error").append("<p>"+i.statusText+" ("+i.status+")</p>")}).always(function(){++n===t.length&&e.removeClass("ocdi-button-disabled")})})}),n=l(".js-ocdi-gl-item-container").find(".js-ocdi-gl-item"),e="ocdi-is-fadeout",l(".js-ocdi-nav-link").on("click",function(i){i.preventDefault(),l(this).parent().siblings().removeClass("active"),l(this).parent().addClass("active");var i=this.hash.slice(1),e=l(".js-ocdi-gl-item-container");e.css("min-width",e.outerHeight()),t(i).done(function(){e.removeAttr("style")})}),l(".js-ocdi-gl-search").on("keyup",function(i){0<l(this).val().length?(l(".js-ocdi-gl-item-container").find(".js-ocdi-gl-item").hide(),l(".js-ocdi-gl-item-container").find('.js-ocdi-gl-item[data-name*="'+l(this).val().toLowerCase()+'"]').show()):l(".js-ocdi-gl-item-container").find(".js-ocdi-gl-item").show()})});